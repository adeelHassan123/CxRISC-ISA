=== RISC-V SINGLE-CYCLE CPU - DETAILED TRACE ===
Program: program/prog.asm | Instructions: 8

--- INITIAL STATE ---
--- Register File ---
R0 = 00000000000000000000000000000000 (0)
R1 = 00000000000000000000000000000000 (0)
R2 = 00000000000000000000000000000000 (0)
R3 = 00000000000000000000000000000000 (0)
R4 = 00000000000000000000000000000000 (0)
R5 = 00000000000000000000000000000000 (0)
R6 = 00000000000000000000000000000000 (0)
R7 = 00000000000000000000000000000000 (0)


=============================================================
CYCLE 1    PC = 0x0000
-------------------------------------------------------------
FETCH:
    Raw instruction bits = 00000000101000000010000010010011
    Disassembled        = ADDI R1, R0, 10

DECODE:
    opcode = 13 → OP-IMM
    rd  = R1 
    rs1 = R0 
    imm = 10 (sign-extended)
    Full 32-bit layout:
        31-20      19-15  14-12  11-7   6-0
        imm        rs1    funct3 rd     opcode
        000000001010  00000  010  00001  0010011

REGISTER READ:
    R0 value → 00000000000000000000000000000000 (0)

EXECUTE (ALU / Address Generation):
    Address = R0 + imm = 0 + 10 = 0x000a (10)

WRITEBACK:
    R1 ← 00000000000000000000000000001010 (10)

--- Current Register File ---
R0 = 00000000000000000000000000000000 (0)
R1 = 00000000000000000000000000001010 (10)
R2 = 00000000000000000000000000000000 (0)
R3 = 00000000000000000000000000000000 (0)
R4 = 00000000000000000000000000000000 (0)
R5 = 00000000000000000000000000000000 (0)
R6 = 00000000000000000000000000000000 (0)
R7 = 00000000000000000000000000000000 (0)

-------------------------------------------------------------

=============================================================
CYCLE 2    PC = 0x0004
-------------------------------------------------------------
FETCH:
    Raw instruction bits = 00000001010000000010000100010011
    Disassembled        = ADDI R2, R0, 20

DECODE:
    opcode = 13 → OP-IMM
    rd  = R2 
    rs1 = R0 
    imm = 20 (sign-extended)
    Full 32-bit layout:
        31-20      19-15  14-12  11-7   6-0
        imm        rs1    funct3 rd     opcode
        000000010100  00000  010  00010  0010011

REGISTER READ:
    R0 value → 00000000000000000000000000000000 (0)

EXECUTE (ALU / Address Generation):
    Address = R0 + imm = 0 + 20 = 0x0014 (20)

WRITEBACK:
    R2 ← 00000000000000000000000000010100 (20)

--- Current Register File ---
R0 = 00000000000000000000000000000000 (0)
R1 = 00000000000000000000000000001010 (10)
R2 = 00000000000000000000000000010100 (20)
R3 = 00000000000000000000000000000000 (0)
R4 = 00000000000000000000000000000000 (0)
R5 = 00000000000000000000000000000000 (0)
R6 = 00000000000000000000000000000000 (0)
R7 = 00000000000000000000000000000000 (0)

-------------------------------------------------------------

=============================================================
CYCLE 3    PC = 0x0008
-------------------------------------------------------------
FETCH:
    Raw instruction bits = 00000000001000001000000110110011
    Disassembled        = ADD R3, R1, R2

DECODE:
    opcode = 33 → OP (R-type)
    rd  = R3 
    rs1 = R1 
    rs2 = R2 
    Full 32-bit layout:
        31-20      19-15  14-12  11-7   6-0
        imm        rs1    funct3 rd     opcode
        000000000010  00001  000  00011  0110011

REGISTER READ:
    R1 value → 00000000000000000000000000001010 (10)
    R2 value → 00000000000000000000000000010100 (20)

EXECUTE (ALU / Address Generation):
    ALU: R1 + R2 = 30

WRITEBACK:
    R3 ← 00000000000000000000000000011110 (30)

--- Current Register File ---
R0 = 00000000000000000000000000000000 (0)
R1 = 00000000000000000000000000001010 (10)
R2 = 00000000000000000000000000010100 (20)
R3 = 00000000000000000000000000011110 (30)
R4 = 00000000000000000000000000000000 (0)
R5 = 00000000000000000000000000000000 (0)
R6 = 00000000000000000000000000000000 (0)
R7 = 00000000000000000000000000000000 (0)

-------------------------------------------------------------

=============================================================
CYCLE 4    PC = 0x000c
-------------------------------------------------------------
FETCH:
    Raw instruction bits = 00000000001100000010000000100011
    Disassembled        = SW R3, 0(R0)

DECODE:
    opcode = 23 → STORE
    rs1 = R0 
    rs2 = R3 
    imm = 0 (sign-extended)
    Full 32-bit layout:
        31-20      19-15  14-12  11-7   6-0
        imm        rs1    funct3 rd     opcode
        000000000011  00000  010  00000  0100011

REGISTER READ:
    R0 value → 00000000000000000000000000000000 (0)
    R3 value → 00000000000000000000000000011110 (30)

EXECUTE (ALU / Address Generation):
    Address = R0 + imm = 0 + 0 = 0x0000 (0)

MEMORY ACCESS:
    Store to 0x0000 ← 00000000000000000000000000011110 (30)

--- Current Register File ---
R0 = 00000000000000000000000000000000 (0)
R1 = 00000000000000000000000000001010 (10)
R2 = 00000000000000000000000000010100 (20)
R3 = 00000000000000000000000000011110 (30)
R4 = 00000000000000000000000000000000 (0)
R5 = 00000000000000000000000000000000 (0)
R6 = 00000000000000000000000000000000 (0)
R7 = 00000000000000000000000000000000 (0)

-------------------------------------------------------------

=============================================================
CYCLE 5    PC = 0x0010
-------------------------------------------------------------
FETCH:
    Raw instruction bits = 00000000000000000010001000000011
    Disassembled        = LW R4, 0(R0)

DECODE:
    opcode = 03 → LOAD
    rd  = R4 
    rs1 = R0 
    imm = 0 (sign-extended)
    Full 32-bit layout:
        31-20      19-15  14-12  11-7   6-0
        imm        rs1    funct3 rd     opcode
        000000000000  00000  010  00100  0000011

REGISTER READ:
    R0 value → 00000000000000000000000000000000 (0)

EXECUTE (ALU / Address Generation):
    Address = R0 + imm = 0 + 0 = 0x0000 (0)

MEMORY ACCESS:
    Load from 0x0000 → 00000000000000000000000000011110 (30)

WRITEBACK:
    R4 ← 00000000000000000000000000011110 (30)

--- Current Register File ---
R0 = 00000000000000000000000000000000 (0)
R1 = 00000000000000000000000000001010 (10)
R2 = 00000000000000000000000000010100 (20)
R3 = 00000000000000000000000000011110 (30)
R4 = 00000000000000000000000000011110 (30)
R5 = 00000000000000000000000000000000 (0)
R6 = 00000000000000000000000000000000 (0)
R7 = 00000000000000000000000000000000 (0)

-------------------------------------------------------------

=============================================================
CYCLE 6    PC = 0x0014
-------------------------------------------------------------
FETCH:
    Raw instruction bits = 00000000000100000000001000100011
    Disassembled        = SB R1, 4(R0)

DECODE:
    opcode = 23 → STORE
    rs1 = R0 
    rs2 = R1 
    imm = 4 (sign-extended)
    Full 32-bit layout:
        31-20      19-15  14-12  11-7   6-0
        imm        rs1    funct3 rd     opcode
        000000000001  00000  000  00100  0100011

REGISTER READ:
    R0 value → 00000000000000000000000000000000 (0)
    R1 value → 00000000000000000000000000001010 (10)

EXECUTE (ALU / Address Generation):
    Address = R0 + imm = 0 + 4 = 0x0004 (4)

MEMORY ACCESS:
    Store to 0x0004 ← 00000000000000000000000000001010 (10) (byte)

--- Current Register File ---
R0 = 00000000000000000000000000000000 (0)
R1 = 00000000000000000000000000001010 (10)
R2 = 00000000000000000000000000010100 (20)
R3 = 00000000000000000000000000011110 (30)
R4 = 00000000000000000000000000011110 (30)
R5 = 00000000000000000000000000000000 (0)
R6 = 00000000000000000000000000000000 (0)
R7 = 00000000000000000000000000000000 (0)

-------------------------------------------------------------

=============================================================
CYCLE 7    PC = 0x0018
-------------------------------------------------------------
FETCH:
    Raw instruction bits = 00000000010000000000001010000011
    Disassembled        = LB R5, 4(R0)

DECODE:
    opcode = 03 → LOAD
    rd  = R5 
    rs1 = R0 
    imm = 4 (sign-extended)
    Full 32-bit layout:
        31-20      19-15  14-12  11-7   6-0
        imm        rs1    funct3 rd     opcode
        000000000100  00000  000  00101  0000011

REGISTER READ:
    R0 value → 00000000000000000000000000000000 (0)

EXECUTE (ALU / Address Generation):
    Address = R0 + imm = 0 + 4 = 0x0004 (4)

MEMORY ACCESS:
    Load from 0x0004 → 00000000000000000000000000001010 (10) (byte, sign-extended)

WRITEBACK:
    R5 ← 00000000000000000000000000001010 (10)

--- Current Register File ---
R0 = 00000000000000000000000000000000 (0)
R1 = 00000000000000000000000000001010 (10)
R2 = 00000000000000000000000000010100 (20)
R3 = 00000000000000000000000000011110 (30)
R4 = 00000000000000000000000000011110 (30)
R5 = 00000000000000000000000000001010 (10)
R6 = 00000000000000000000000000000000 (0)
R7 = 00000000000000000000000000000000 (0)

-------------------------------------------------------------

=============================================================
CYCLE 8    PC = 0x001c
-------------------------------------------------------------
FETCH:
    Raw instruction bits = 00000000000000000000000000000000
    Disassembled        = NOP

DECODE:
    opcode = 00 → UNKNOWN
    Full 32-bit layout:
        31-20      19-15  14-12  11-7   6-0
        imm        rs1    funct3 rd     opcode
        000000000000  00000  000  00000  0000000

REGISTER READ:

EXECUTE (ALU / Address Generation):
    ALU: R-1 + R-1 = 0

--- Current Register File ---
R0 = 00000000000000000000000000000000 (0)
R1 = 00000000000000000000000000001010 (10)
R2 = 00000000000000000000000000010100 (20)
R3 = 00000000000000000000000000011110 (30)
R4 = 00000000000000000000000000011110 (30)
R5 = 00000000000000000000000000001010 (10)
R6 = 00000000000000000000000000000000 (0)
R7 = 00000000000000000000000000000000 (0)

-------------------------------------------------------------

=== EXECUTION COMPLETE ===
Total cycles: 8 (CPI = 1.0)

--- FINAL REGISTERS ---
--- Register File ---
R0 = 00000000000000000000000000000000 (0)
R1 = 00000000000000000000000000001010 (10)
R2 = 00000000000000000000000000010100 (20)
R3 = 00000000000000000000000000011110 (30)
R4 = 00000000000000000000000000011110 (30)
R5 = 00000000000000000000000000001010 (10)
R6 = 00000000000000000000000000000000 (0)
R7 = 00000000000000000000000000000000 (0)

